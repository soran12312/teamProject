<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ClassMapper">


	<insert id="insertClass" parameterType="com.pi.domain.ClassVO">
		INSERT INTO class 
		( class_name, email, category_number, detail, price, max_member, location_number, start_date, end_date )
		VALUES 
		( #{class_name}, #{email}, #{category_number}, #{detail}, #{price}, #{max_member}, #{location_number}, #{start_date}, #{end_date} )
	</insert>

	<insert id="insertHashtag" parameterType="com.pi.domain.HashtagVO" >
		INSERT INTO hashtag
		( class_number, hashtag_name, category_number ) 
		VALUES 
		( (SELECT MAX(class_number) FROM class), #{hashtag_name}, #{category_number} )	
	</insert>
	
	<insert id="insert_classImage" parameterType="com.pi.domain.ImageVO">
		INSERT INTO image 
		( original_name, save_name, path, size, main_image )
		VALUES
		( #{original_name}, #{save_name}, #{path}, #{size}, #{main_image} )
	</insert>
	
	<update id="updateImgByPath" parameterType="String">
		UPDATE image SET 
		class_number = (SELECT MAX(class_number) FROM class)
		WHERE path = #{path}
	</update>
	
</mapper>