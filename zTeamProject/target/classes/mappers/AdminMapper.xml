<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AdminMapper">

	<select id="selectMember" parameterType="com.pi.domain.MemberVO" resultType="com.pi.domain.MemberVO">
		SELECT * FROM member
		
	</select>
	
	
	
	<!-- MySQL-->
    <!-- 게시물 목록(페이징) -->
    <select id="getListPaging" parameterType="com.pi.domain.MemberVO" resultType="com.pi.domain.MemberVO">
    
        select * from (
                select email, nickname, member_grade, member_state, introduce, business_number  
                from member ) as T1 
        <!-- limit ((${pageNum}-1)*${amount}), ${amount} -->
        limit #{skip},#{amount}
    
    </select>
    
    
    <!-- 회원 등급 수정-->
    <update id="updateMemberGrade" parameterType="com.pi.domain.MemberVO" >
    
        UPDATE member SET 
		( member_grade = #{member_grade} )
		WHERE email = #{email}
    
    </update>
    
    <!-- 회원 등급 수정-->
   <!--  <update id="updateMemberGrade" parameterType="com.pi.domain.MemberVO" >
    
        UPDATE member SET 
		( member_grade = #{member_grade} )
		WHERE email = #{email}
    
    </update> -->
    
    <update id="updateMember" parameterType="com.pi.domain.MemberVO">
	  UPDATE member
	  <set>
	    <if test="member_grade != null">
	      member_grade = #{member_grade},
	    </if>
	    <if test="member_state != null">
	      member_state = #{member_state},
	    </if>
	    <if test="business_number != null">
	      business_number = #{business_number},
	    </if>
	  </set>
	  WHERE email = #{email}
	</update>
    
    
	
</mapper>